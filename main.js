(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.className=n,this.parentElement=o}var n,o;return n=t,(o=[{key:"createElement",value:function(){var e=document.createElement(this.name);return e.className=this.className,e}},{key:"appendElement",value:function(){var e=this.createElement();return this.parentElement.append(e),e}},{key:"insertText",value:function(e){var t=this.appendElement();return t.textContent=e,t}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}(),n=new t("div","wrapper",document.body).appendElement(),o=new t("main","main",n).appendElement(),c=new t("section","section",o).appendElement();new t("h1","section__title",c).insertText("Virtual keyboard");var a=new t("form","section__form form",c).appendElement(),s=new t("textarea","form__textarea",a).appendElement();new t("p","section__info",c).insertText("OS Windows. Switch language buttons: Left Ctr + Left Alt.");var i=new t("div","section__keyboard keyboard",c).appendElement(),r=[],d=!0,y=localStorage.getItem("currentLanguage")?localStorage.getItem("currentLanguage"):"RU",f=!1,l=!1,k=!1,h=[{code:"Backquote",key:"ё",enKey:"`",shiftEn:"~"},{code:"Digit1",key:"1",shift:"!"},{code:"Digit2",key:"2",shift:'"',shiftEn:"@"},{code:"Digit3",key:"3",shift:"№",shiftEn:"#"},{code:"Digit4",key:"4",shift:";",shiftEn:"$"},{code:"Digit5",key:"5",shift:"%",shiftEn:"%"},{code:"Digit6",key:"6",shift:":",shiftEn:"^"},{code:"Digit7",key:"7",shift:"?",shiftEn:"&"},{code:"Digit8",key:"8",shift:"*"},{code:"Digit9",key:"9",shift:"("},{code:"Digit0",key:"0",shift:")"},{code:"Minus",key:"-",shift:"_"},{code:"Equal",key:"=",shift:"+"},{code:"Backspace",key:"Backspace"}],u=[{code:"Tab",key:"Tab"},{code:"KeyQ",key:"й",enKey:"q"},{code:"KeyW",key:"ц",enKey:"w"},{code:"KeyE",key:"у",enKey:"e"},{code:"KeyR",key:"к",enKey:"r"},{code:"KeyT",key:"е",enKey:"t"},{code:"KeyY",key:"н",enKey:"y"},{code:"KeyU",key:"г",enKey:"u"},{code:"KeyI",key:"ш",enKey:"i"},{code:"KeyO",key:"щ",enKey:"o"},{code:"KeyP",key:"з",enKey:"p"},{code:"BracketLeft",key:"х",enKey:"[",shiftEn:"{"},{code:"BracketRight",key:"ъ",enKey:"]",shiftEn:"}"},{code:"Backslash",key:"\\",shift:"/",shiftEn:"|"},{code:"Delete",key:"Delete"}],E=[{code:"CapsLock",key:"CapsLock"},{code:"KeyA",key:"ф",enKey:"a"},{code:"KeyS",key:"ы",enKey:"s"},{code:"KeyD",key:"в",enKey:"d"},{code:"KeyF",key:"а",enKey:"f"},{code:"KeyG",key:"п",enKey:"g"},{code:"KeyH",key:"р",enKey:"h"},{code:"KeyJ",key:"о",enKey:"j"},{code:"KeyK",key:"л",enKey:"k"},{code:"KeyL",key:"д",enKey:"l"},{code:"Semicolon",key:"ж",enKey:";",shiftEn:":"},{code:"Quote",key:"э",enKey:"'",shiftEn:'"'},{code:"Enter",key:"Enter"}],p=[{code:"ShiftLeft",key:"Shift"},{code:"KeyZ",key:"я",enKey:"z"},{code:"KeyX",key:"ч",enKey:"x"},{code:"KeyC",key:"с",enKey:"c"},{code:"KeyV",key:"м",enKey:"v"},{code:"KeyB",key:"и",enKey:"b"},{code:"KeyN",key:"т",enKey:"n"},{code:"KeyM",key:"ь",enKey:"m"},{code:"Comma",key:"б",enKey:",",shiftEn:"<"},{code:"Period",key:"ю",enKey:".",shiftEn:">"},{code:"Slash",key:"/",shift:",",shiftEn:"?"},{code:"ArrowUp",key:"↑"},{code:"ShiftRight",key:"Shift"}],_=[{code:"ControlLeft",key:"Ctr"},{code:"MetaLeft",key:"Win"},{code:"AltLeft",key:"Alt"},{code:"Space",key:" "},{code:"AltRight",key:"Alt"},{code:"ArrowLeft",key:"←"},{code:"ArrowDown",key:"↓"},{code:"ArrowRight",key:"→"},{code:"ControlRight",key:"Ctr"}],L=[].concat(h,u,E,p,_),b=[new t("div","keyboard__row",i).appendElement(),new t("div","keyboard__row",i).appendElement(),new t("div","keyboard__row",i).appendElement(),new t("div","keyboard__row",i).appendElement(),new t("div","keyboard__row",i).appendElement()],K=b[0],C=b[1],x=b[2],g=b[3],w=b[4];h.forEach((function(e){var n=new t("button","keyboard__button ".concat(e.code),K).insertText(e.key);"EN"===y&&e.enKey&&(n.textContent=e.enKey),"Backspace"===e.code&&n.classList.add("keyboard__button_special"),r.push(n)})),u.forEach((function(e){var n=new t("button","keyboard__button ".concat(e.code),C).insertText(e.key);"EN"===y&&e.enKey&&(n.textContent=e.enKey),"Tab"!==e.code&&"Delete"!==e.code||n.classList.add("keyboard__button_special"),r.push(n)})),E.forEach((function(e){var n=new t("button","keyboard__button ".concat(e.code),x).insertText(e.key);"EN"===y&&e.enKey&&(n.textContent=e.enKey),"CapsLock"!==e.code&&"Enter"!==e.code||n.classList.add("keyboard__button_special"),r.push(n)})),p.forEach((function(e){var n=new t("button","keyboard__button ".concat(e.code),g).insertText(e.key);"EN"===y&&e.enKey&&(n.textContent=e.enKey),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||n.classList.add("keyboard__button_special"),r.push(n)})),_.forEach((function(e){var n=new t("button","keyboard__button ".concat(e.code),w).insertText(e.key);"EN"===y&&e.enKey&&(n.textContent=e.enKey),"ControlLeft"!==e.code&&"ControlRight"!==e.code&&"MetaLeft"!==e.code&&"AltLeft"!==e.code&&"AltRight"!==e.code||n.classList.add("keyboard__button_special"),r.push(n)})),i.addEventListener("click",(function(e){s.focus(),e.target.classList.contains("keyboard__button")&&(e.target.classList.contains("keyboard__button_special")||s.setRangeText(e.target.textContent,s.selectionStart,s.selectionEnd,"end"),e.target.classList.contains("Backspace")&&s.selectionStart&&s.setRangeText("",s.selectionStart-1,s.selectionStart),e.target.classList.contains("Delete")&&s.setRangeText("",s.selectionStart,s.selectionStart+1),e.target.classList.contains("Enter")&&s.setRangeText("\n",s.selectionStart,s.selectionEnd,"end"),e.target.classList.contains("Tab")&&s.setRangeText("    ",s.selectionStart,s.selectionEnd,"end"),e.target.classList.contains("ControlLeft")&&(f=!0),e.target.classList.contains("CapsLock")&&(r.forEach((function(e){e.classList.contains("keyboard__button_special")||(e.textContent=d?e.textContent.toUpperCase():e.textContent.toLowerCase())})),d=!d))})),i.addEventListener("mousedown",(function(e){(e.target.classList.contains("ShiftLeft")||e.target.classList.contains("ShiftRight"))&&(r.forEach((function(e){var t=e;e.classList.contains("keyboard__button_special")||"RU"!==y?e.classList.contains("keyboard__button_special")||"EN"!==y||L.forEach((function(n){e.classList.contains(n.code)&&n.shiftEn?t.textContent=n.shiftEn:e.classList.contains(n.code)&&n.shift&&(t.textContent=n.shift)})):L.forEach((function(n){e.classList.contains(n.code)&&n.shift&&(t.textContent=n.shift)}))})),k||(k=!0,r.forEach((function(e){e.classList.contains("keyboard__button_special")||(e.textContent=d?e.textContent.toUpperCase():e.textContent.toLowerCase())})),d=!d))})),i.addEventListener("mouseup",(function(e){(e.target.classList.contains("ShiftLeft")||e.target.classList.contains("ShiftRight"))&&(k=!1,r.forEach((function(e){var t=e;e.classList.contains("keyboard__button_special")||"RU"!==y?e.classList.contains("keyboard__button_special")||"EN"!==y||L.forEach((function(e){var n=t.classList.contains(e.code);n&&e.shiftEn&&(t.textContent=e.enKey||e.key),n&&e.shift&&(t.textContent=e.enKey||e.key)})):L.forEach((function(n){e.classList.contains(n.code)&&(t.textContent=n.key)}))})),r.forEach((function(e){e.classList.contains("keyboard__button_special")||(e.textContent=d?e.textContent.toUpperCase():e.textContent.toLowerCase())})),d=!d)})),document.addEventListener("keydown",(function(e){document.activeElement!==s||e.preventDefault(),r.forEach((function(t){!t.classList.contains("keyboard__button_special")&&t.classList.contains(e.code)&&s.setRangeText(t.textContent,s.selectionStart,s.selectionEnd,"end")})),"Backspace"===e.code&&s.selectionStart&&s.setRangeText("",s.selectionStart-1,s.selectionStart),"Delete"===e.code&&s.setRangeText("",s.selectionStart,s.selectionStart+1),"Enter"===e.code&&s.setRangeText("\n",s.selectionStart,s.selectionEnd,"end"),"Tab"===e.code&&s.setRangeText("    ",s.selectionStart,s.selectionEnd,"end"),"ControlLeft"===e.code&&(f=!0),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||(r.forEach((function(e){var t=e;e.classList.contains("keyboard__button_special")||"RU"!==y?e.classList.contains("keyboard__button_special")||"EN"!==y||L.forEach((function(n){e.classList.contains(n.code)&&n.shiftEn?t.textContent=n.shiftEn:e.classList.contains(n.code)&&n.shift&&(t.textContent=n.shift)})):L.forEach((function(n){e.classList.contains(n.code)&&n.shift&&(t.textContent=n.shift)}))})),k||(k=!0,r.forEach((function(e){e.classList.contains("keyboard__button_special")||(e.textContent=d?e.textContent.toUpperCase():e.textContent.toLowerCase())})),d=!d)),"AltLeft"===e.code&&(l=!0,f&&l&&"RU"===y?(r.forEach((function(e){var t=e;L.forEach((function(e){t.textContent.toLowerCase()===e.key&&e.enKey&&(t.textContent=d?e.enKey:e.enKey.toUpperCase())}))})),y="EN"):f&&l&&"EN"===y&&(r.forEach((function(e){var t=e;L.forEach((function(e){t.textContent.toLowerCase()===e.enKey&&(t.textContent=d?e.key:e.key.toUpperCase())}))})),y="RU")),"AltLeft"!==e.code&&"AltRight"!==e.code||e.preventDefault(),"CapsLock"===e.code&&(r.forEach((function(e){e.classList.contains("keyboard__button_special")||(e.textContent=d?e.textContent.toUpperCase():e.textContent.toLowerCase())})),d=!d),r.forEach((function(t){t.classList.contains(e.code)&&t.classList.add("active-button")}))})),document.addEventListener("keyup",(function(e){"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||(k=!1,r.forEach((function(e){var t=e;t.classList.contains("keyboard__button_special")||"RU"!==y?t.classList.contains("keyboard__button_special")||"EN"!==y||L.forEach((function(e){var n=t.classList.contains(e.code);n&&e.shiftEn&&(t.textContent=e.enKey||e.key),n&&e.shift&&(t.textContent=e.enKey||e.key)})):L.forEach((function(e){t.classList.contains(e.code)&&(t.textContent=e.key)}))})),r.forEach((function(e){e.classList.contains("keyboard__button_special")||(e.textContent=d?e.textContent.toUpperCase():e.textContent.toLowerCase())})),d=!d),"ControlLeft"===e.code&&(f=!1),"AltLeft"===e.code&&(l=!1),r.forEach((function(t){t.classList.contains(e.code)&&t.classList.remove("active-button")}))})),window.addEventListener("beforeunload",(function(){localStorage.setItem("currentLanguage",y)}))})();